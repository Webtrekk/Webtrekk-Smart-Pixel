(function(){function n(l){l.extension.push(function(h){var b=!1,d={parameterIdVariation:"",withPersonalization:!0,useVariationInActionName:!1,trafficDeviationThreshold:{min:"",max:""},c:{}},e=null;return{name:"kameleoon",version:"1.1.0",config:function(a){if("undefined"===typeof a)return d;if("string"===typeof a.parameterIdVariation||"number"===typeof a.parameterIdVariation)d.parameterIdVariation=a.parameterIdVariation;"boolean"===typeof a.withPersonalization&&(d.withPersonalization=a.withPersonalization);"boolean"===
typeof a.useVariationInActionName&&(d.useVariationInActionName=a.useVariationInActionName);a.trafficDeviationThreshold&&"object"===typeof a.trafficDeviationThreshold&&("number"===typeof a.trafficDeviationThreshold.min&&(d.trafficDeviationThreshold.min=a.trafficDeviationThreshold.min),"number"===typeof a.trafficDeviationThreshold.max&&(d.trafficDeviationThreshold.max=a.trafficDeviationThreshold.max))},trigger:function(a){if(b&&"page"===a.mode&&"after"===a.type){var f,l=function(a){if(a.a&&a.b){var m=
"kameleoon_"+a.b+"_"+a.f,b=m+"_"+a.a,c={};d.parameterIdVariation&&(c[d.parameterIdVariation]=a.a);d.useVariationInActionName&&(m=b);"undefined"===typeof d.c[b]&&(window.setTimeout(function(){h.action.data.add({name:m,parameter:c});h.trackAction()},200),d.c[b]=1)}},g=function(a){if(a&&"number"===typeof a.length)for(var b=0,f=a.length;b<f;b++){var c=a[b];if(c.active||c.redirectProcessed){var e=c.associatedVariation?c.associatedVariation.id:"",h=c.associatedVariation?c.associatedVariation.name:"Reference";
if(e&&c.trafficDeviation){var g="number"===typeof c.trafficDeviation[e]?c.trafficDeviation[e]:50,k=d.trafficDeviationThreshold;if("number"===typeof k.min&&k.min>=g)continue;if("number"===typeof k.max&&k.max<=g)continue}try{l({version:"1.1.0",f:c.id,b:c.name,g:e,a:h})}catch(t){}}}},p=function(){"undefined"!==typeof window.Kameleoon&&"undefined"!==typeof window.Kameleoon.API&&(f=window.Kameleoon.API,g(f.Experiments?f.Experiments.getAll():[]),d.withPersonalization&&g(f.Personalizations?f.Personalizations.getAll():
[]));window.setTimeout(function(){p()},500)};(function(){null===e&&(e=window.setInterval(function(){"undefined"!==typeof window.Kameleoon&&"undefined"!==typeof window.Kameleoon.API&&(window.clearInterval(e),e=null,p())},250))})()}},isActivated:function(){return b},activate:function(){b||(b=!0)},deactivate:function(){b&&(b=!1)}}})};var q={use:function(){return n}},r="undefined"!==typeof module&&module.exports;"function"===typeof define&&define.amd?define("wtSmartKameleoon",q):r?module.exports=q:(this.wtSmart=this.wtSmart||[],this.wtSmart.push(q.use()));})();
